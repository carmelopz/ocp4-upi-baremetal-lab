= OLM

The Operator Lifecycle Manager (OLM) helps users install, update, and manage the lifecycle of all Operators and their associated services running across their clusters.

== Mirror operator catalog

Build and mirror the catalog for `+redhat-operators+`.

[source,bash]
----
./day-two/olm/${OCP_ENVIRONMENT}/mirror-catalog-image.sh
----

== Troubleshooting

Forward catalog service port to query information from localhost.

[source,bash]
----
oc port-forward service/redhat-operators-disconnected 50051:50051
----

List all the operators in the catalog.

[source,bash]
----
grpcurl -plaintext localhost:50051 api.Registry/ListPackages
----

Get information for an operator in a catalog.

[source,bash]
----
grpcurl -plaintext -d '{"name":"${OPERATOR_NAME}"}' \
    localhost:50051 api.Registry/GetPackage
----

Get information for an specific channel.

[source,bash]
----
grpcurl -plaintext -d '{"pkgName":"${OPERATOR_NAME}", "channelName":"${OPERATOR_CHANNEL}"}' \
    localhost:50051 api.Registry/GetBundleForChannel
----
